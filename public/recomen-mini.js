function register(e){console.log("registering ren"),document.cookie="ren_bi="+e+";domain="+window.location.hostname+";samesite=strict;"}function event(e,n,t){if("undefined"==typeof ren_track&&(ren_track=predictionio({})),"buy"===e){var r=getCookie("ren_bi");console.log("buying "+n+" "+t+" "+r),ren_track.buy({uid:r+";"+n,iid:r+";"+t},function(){})}else if("view"===e){var r=getCookie("ren_bi");console.log("viewing "+n+" "+t+" "+r),ren_track.view({uid:r+";"+n,iid:r+";"+t},function(){})}else console.log("undefined event_name")}function getCookie(e){for(var n=e+"=",t=decodeURIComponent(document.cookie),r=t.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return""}var predictionio=function(e){function n(e,n){var i=new Date,a=r(i)+"T"+t(i)+o(i),s={event:e,entityType:"user",entityId:n.uid+"",targetEntityType:"item",targetEntityId:n.iid+"",eventTime:a};return s}function t(e){var n=e.getHours(),t=e.getMinutes(),r=e.getSeconds(),i=e.getMilliseconds();n=10>n?"0"+n:n,t=10>t?"0"+t:t,r=10>r?"0"+r:r,i=10>i?"00"+i:100>i?"0"+i:i;var o=n+":"+t+":"+r+"."+i;return o}function r(e){var n=e.getFullYear(),t=e.getMonth()+1,r=e.getDate();t=10>t?"0"+t:t,r=10>r?"0"+r:r;var i=n+"-"+t+"-"+r;return i}function i(e,n){for(var t=""+e;t.length<n;)t="0"+t;return t}function o(e){var n=(new Date).getTimezoneOffset();return n=(0>n?"+":"-")+i(parseInt(Math.abs(n/60)),2)+":"+i(Math.abs(n%60),2)}var a={},s="http://api.karek.co/",u="event";"undefined"!=typeof e&&"undefined"!=typeof e.host&&(s=e.host);var c=function(e,n,t,r){var i=new XMLHttpRequest;if("undefined"!=typeof r?i.onreadystatechange=function(){if(4==i.readyState&&2==Math.floor(i.status/100)){var e=JSON.parse(i.responseText);r(e)}}:i.onreadystatechange=function(){if(4==i.readyState&&2==Math.floor(i.status/100)){var e=JSON.parse(i.responseText);console.log(e)}},"GET"===n)console.log("not implemented yet");else{if("POST"!==n)throw new Error("Invalid HTTP method: ".concat(n));var o=s.concat(e,"");i.open(n,o),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t))}},f=function(e,n,t){for(var r=[],i=0;i<n.length;i++)"undefined"==typeof e[n[i]]&&r.push(n[i]);if(r.length>0){var o=r.join(", ");throw new Error("The following required parameters for ".concat(t," are missing: ",o))}};return a.buy=function(e,t){f(e,["uid","iid"],"buy");var r=n("buy",e);c(u.concat(""),"POST",r,t)},a.view=function(e,t){f(e,["uid","iid"],"buy");var r=n("view",e);c(u.concat(""),"POST",r,t)},a},ren_track;window.ren=window.ren||function(){(ren.q=ren.q||[]).push(arguments)};var qq=window.ren.q;window.ren=function(){if("exec"===arguments[0])for(var e=0;e<qq.length;e++){var n=qq[e];"register"==n[0]?register(n[1]):event(n[0],n[1],n[2])}else"register"==arguments[0]?register(arguments[1]):event(arguments[0],arguments[1],arguments[2])},ren("exec");